<div class="min-h-screen bg-gray-900">
    <div class="flex flex-col items-center">
        <div class="flex flex-col items-center mt-10">
            <input type="text" class="w-full p-2 rounded-lg" placeholder="Buscar libro o autor" [(ngModel)]="searchTerm" (input)="filterBooks()">
        </div>
    </div>

    <div class="flex flex-wrap p-16">
        <div *ngFor="let book of filteredBooks" class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-3">
            <div class="bg-gray-800 p-5 rounded-lg flex flex-col items-center sm:max-w-full">
                <img [src]="book.image" alt="book" class="rounded-lg h-96 w-64">
                <div class="flex flex-col items-center">
                    <h2 class="font-bold text-slate-200 text-2xl mt-4 text-center overflow-hidden whitespace-nowrap text-ellipsis max-w-60">{{ book.name }}</h2>
                    <p class="text-slate-200 text-lg text-center overflow-hidden whitespace-nowrap text-ellipsis max-w-60">{{ book.autor }}</p>
                    <p class="text-slate-200 text-lg my-3 text-center overflow-hidden whitespace-nowrap text-ellipsis max-w-60">Género: {{ book.category }}</p>
                    <p class="mb-5 text-xl font-bold text-orange-500 text-center overflow-hidden whitespace-nowrap text-ellipsis max-w-60" title="{{book.price}}">
                        {{ book.sale === 1 ? (book.price * 0.8).toFixed(2) : book.price.toFixed(2) }} € 
                        <span *ngIf="book.sale === 1" class="line-through text-slate-200">{{ book.price.toFixed(2) }} €</span>
                    </p>
                    <div class="flex gap-4">
                        <button class="bg-slate-700 text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-slate-900">Comprar</button>
                        <button (click)="deleteBook(book.reference)" class="bg-red-500 text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-red-600">Borrar</button>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="books.length === 0;" class="flex justify-center items-center gap-3 m-auto">
            <h1 class="text-slate-200 text-2xl">No hay libros. <a href="adminpanel" class="underline underline-offset-4 hover:underline-offset-[6px] transition-all duration-400">Añade</a> uno!</h1>
        </div> 
        <div *ngIf="filteredBooks.length === 0 && books.length !== 0" class="flex justify-center gap-3 m-auto">
            <h1 class="text-slate-200 text-2xl r">No tenemos el libro o autor. Lo sentimos</h1>
            <img src="../../../assets/triste.png" alt="sad emoji" class="max-h-10">
        </div>        
    </div>
</div>
